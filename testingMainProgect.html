<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <main-components props='["welcom", "user", "username"]'></main-components>

    <div id="myElement"></div>
    <script src="./testingMainProgect.js"></script>
    <script>



        const Header = (props) => {
            let users = ['user1', 'user2']

            return {
                selector: 'main-components',
                style: ['.test{  color: hotpink;}'],
                template: `
                  <div class='bg-red-200 test'> 
                    ${props} thsldkfff
                     ${users?.map((data) => ` <div> ${data}</div>`).join('')}
                  </div>
                `
            }
        }


        (function regusterComponent(component) {
            let { selector } = component();
            class ComponentClass extends HTMLElement {
                componentElement = component(JSON.parse(this.getAttribute('props')))
                constructor() {
                    super();
                }
                connectedCallback() {
                    this.innerHTML = `
                            <style> ${this.componentElement.style}</style>
                            ${this.componentElement.template}
                         `;
                }
                attributeChangedCallback(attrName, oldVal, newVal) {
                     component(newVal)
                    console.log(attrName, oldVal, newVal)
                }
            }
            window.customElements.define(selector, ComponentClass);
        })(Header);


        const myElement = document.getElementsByTagName('main-components');

        // myElement.setAttribute('props', 'Hello, World!');
        console.log(myElement)
    </script>
</body>

</html>